<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Snake Game</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            background-color: #f0f0f0;
            margin: 0;
        }
        canvas {
            border: 1px solid black;
            background-color: #87CEEB;
        }
        h1 {
            position: absolute;
            top: 10px;
            font-size: 30px;
            color: #333;
        }
    </style>
</head>
<body>

<h1>Snake Game</h1>
<canvas id="gameCanvas" width="400" height="400"></canvas>

<script>
    const canvas = document.getElementById("gameCanvas");
    const ctx = canvas.getContext("2d");

    const snakeSize = 20;
    let snake = [{x: 200, y: 200}];
    let direction = "RIGHT";
    let food = {x: 0, y: 0};
    let score = 0;

    // Funzione per generare il cibo in posizioni casuali
    function generateFood() {
        food.x = Math.floor(Math.random() * (canvas.width / snakeSize)) * snakeSize;
        food.y = Math.floor(Math.random() * (canvas.height / snakeSize)) * snakeSize;
    }

    // Funzione per disegnare la griglia e gli elementi
    function draw() {
        ctx.clearRect(0, 0, canvas.width, canvas.height); // Cancella lo schermo
        for (let i = 0; i < snake.length; i++) {
            ctx.fillStyle = i === 0 ? "#000" : "#008000"; // Testa del serpente Ã¨ nera
            ctx.fillRect(snake[i].x, snake[i].y, snakeSize, snakeSize); // Disegna il serpente
        }
        ctx.fillStyle = "#FFD700"; // Colore del cibo
        ctx.fillRect(food.x, food.y, snakeSize, snakeSize); // Disegna il cibo
    }

    // Funzione per aggiornare la posizione del serpente
    function update() {
        const head = {...snake[0]}; // Crea una copia della testa del serpente

        if (direction === "LEFT") head.x -= snakeSize;
        if (direction === "RIGHT") head.x += snakeSize;
        if (direction === "UP") head.y -= snakeSize;
        if (direction === "DOWN") head.y += snakeSize;

        snake.unshift(head); // Aggiunge la nuova testa alla lista del serpente

        if (head.x === food.x && head.y === food.y) {
            score++;
            generateFood(); // Nuovo cibo se il serpente mangia
        } else {
            snake.pop(); // Rimuove l'ultima parte del serpente se non ha mangiato
        }

        // Verifica le collisioni con il muro
        if (head.x < 0 || head.x >= canvas.width || head.y < 0 || head.y >= canvas.height) {
            gameOver();
        }

        // Verifica le collisioni con se stesso
        for (let i = 1; i < snake.length; i++) {
            if (head.x === snake[i].x && head.y === snake[i].y) {
                gameOver();
            }
        }
    }

    // Funzione che mostra il messaggio di game over
    function gameOver() {
        alert("Game Over! Score: " + score);
        snake = [{x: 200, y: 200}]; // Reset del serpente
        score = 0;
        direction = "RIGHT";
        generateFood(); // Nuovo cibo
    }

    // Funzione per cambiare direzione
    function changeDirection(event) {
        if (event.keyCode === 37 && direction !== "RIGHT") direction = "LEFT";
        if (event.keyCode === 38 && direction !== "DOWN") direction = "UP";
        if (event.keyCode === 39 && direction !== "LEFT") direction = "RIGHT";
        if (event.keyCode === 40 && direction !== "UP") direction = "DOWN";
    }

    // Funzione di gioco
    function gameLoop() {
        update();
        draw();
        setTimeout(gameLoop, 100); // Richiama la funzione ogni 100 ms
    }

    // Imposta il cibo iniziale
    generateFood();

    // Aggiungi un listener per il cambiamento di direzione
    document.addEventListener("keydown", changeDirection);

    // Avvia il gioco
    gameLoop();
</script>

</body>
</html>
